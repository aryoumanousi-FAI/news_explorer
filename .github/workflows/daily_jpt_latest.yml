      - name: Commit updated CSVs (rebase + push)
        run: |
          set -e

          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

          # Make sure we're up to date
          git fetch origin main

          # Stage outputs
          git add jpt_scraper/data/jpt_daily.csv jpt_scraper/data/jpt.csv

          if git diff --cached --quiet; then
            echo "No changes to commit."
            exit 0
          fi

          git commit -m "Daily scrape + merge (JPT)"

          # Rebase our new commit on top of the latest remote main
          git rebase origin/main

          # Push the rebased commit
          git push origin HEAD:main
